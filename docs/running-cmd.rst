.. _rstrunningcli:

=============================
Running isopret: Command line
=============================

Isopret offers most functionality via its graphical user interface (GUI) version,
but does have a command-line tool that can be used to perform Gene Ontology (GO)
overrepresentation analysis from the shell.

The build process described in :rst:rstsetup_ creates both a GUI app (in the
``isopret-gui/target`` subdirectory) and a command-line app (in
the ``isopret-cli/target`` subdirectory). It is fine to leave both apps in these
directories if you like. For the following explanation, we will assume that
the command-line app ``isopret-cli`` is in the current working directory.


The download command
~~~~~~~~~~~~~~~~~~~~

.. _rstdownload:

isopret requires some additional files to run.

1. ``go.json``. The main Gene Ontology file
2. ``goa_human.gaf``. The Gene Ontology annotation file
3. ``hg38_ensembl.ser`` The `Jannovar <https://github.com/charite/jannovar>`_ transcript information file
4. ``hgnc_complete_set.txt`` A file from HGNC with information about human genes
5. ``interpro_domains.txt`` A file from the isopret GitHub derived from interpro biomaRt data
6. ``interpro_domain_desc.txt`` A file from the isopret GitHub derived from interpro biomaRt data
7. ``isoform_function_list_mf.txt`` A file that is generated by the isoform function (GO molecular function) inferrence algorithm described in the manuscript.
8. ``isoform_function_list_bp.txt`` A file that is generated by the isoform function (GO biological process) inferrence algorithm described in the manuscript.



isopret offers a convenience function to download all the files
to a local directory (by default a subdirectory ``data`` is created in the current working directory).
You can change this default with the ``-d`` or ``--data`` options
(If you change this, then you will need to pass the location of your directory to all other isopret commands
using the ``-d`` flag). Download the files automatically as follows.

.. code-block:: java

    java -jar isopret-cli.jar download

isopret will not download the files if they are already present unless the ``--overwrite`` argument is passed. For
instance, the following command would download the four files to a directory called datafiles and would
overwrite any previously downloaded files.

.. code-block:: java

    java -jar isopret-cli.jar download -d datafiles --overwrite


If desired, you can download these files on your own but you need to place them all in the
same directory to run isopret. The GUI uses the same functionality to download these files to a directory
that is chosen or created by the user; this directory can be used by both the command-line and the
GUI version of isopret.

The GO command
^^^^^^^^^^^^^^

This command performs Gene Ontology overrepresentation analysis. The download command must be run before
running this command. The ``--hbadeals`` option is required and indicates the path to an HBA-DEALS output file.

.. code-block:: java

    java -jar isopret-cli.jar GO --hbadeals <path>


The options are

+------------------+--------------------------------------------------------------------------------------+
|  Option          |   Explanation                                                                        |
+==================+======================================================================================+
| -b,--hbadeals    | Path to HBA-DEALS output file (required)                                             |
+------------------+--------------------------------------------------------------------------------------+
| -c,--calculation | Ontologizer calculation (Term-for-Term, PC-Union, PC-Intersection; default: TfT)     |
+------------------+--------------------------------------------------------------------------------------+
|  --mtc           | Multiple-Testing-Correction for GO analysis (default Bonferroni)                     |
+------------------+--------------------------------------------------------------------------------------+
| -v", --verbose   | Print stats in shell                                                                 |
+------------------+--------------------------------------------------------------------------------------+
| --outfile        | Name of output file to write stats (default gene-ontology-overrep-{input}.tsv        |
+------------------+--------------------------------------------------------------------------------------+


The interpro command
^^^^^^^^^^^^^^^^^^^^

This command performs interpro domain overrepresentation analysis. The download command must be run before
running this command. The ``--hbadeals`` option is required and indicates the path to an HBA-DEALS output file.

.. code-block:: java

    java -jar isopret-cli.jar interpro --hbadeals <path>



The options are

+------------------+--------------------------------------------------------------------------------------+
|  Option          |   Explanation                                                                        |
+==================+======================================================================================+
| -b,--hbadeals    | Path to HBA-DEALS output file (required)                                             |
+------------------+--------------------------------------------------------------------------------------+
| -d,--download    | data download directory (``data`` by default)                                        |
+------------------+--------------------------------------------------------------------------------------+
| --outfile        | Name of output file to write stats (default gene-ontology-overrep-{input}.tsv        |
+------------------+--------------------------------------------------------------------------------------+


